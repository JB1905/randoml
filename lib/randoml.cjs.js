"use strict";function _interopNamespace(t){if(t&&t.__esModule)return t;var e={};return t&&Object.keys(t).forEach((function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})})),e.default=t,e}var defaultSettings={min:1,max:15,exclude:[],hold:[]},RandoML=function(){function t(t){var e=this;if(void 0===t&&(t={}),this.minMax=function(){return e.max-e.min+1},this.settings=this.extendSettings(t.settings||{}),this.callbacks=t.callbacks||{},"function"==typeof this.callbacks.onInit&&this.callbacks.onInit(),this.min=Math.ceil(this.settings.min),this.max=Math.floor(this.settings.max),this.min>this.max)throw"Minimal value is bigger than maximal value";if(this.min===this.max)throw"Minimal and maximal values must be different";var n=this.settings.hold.filter((function(t){return t<e.min||t>e.max}));if(n.length>0)throw n.join(", ")+" are out of range "+this.min+", "+this.max}return t.prototype.choose=function(){if(this.minMax()-this.settings.exclude.length>0){var t=!1;"function"==typeof this.callbacks.onChoice&&this.callbacks.onChoice();do{if(this.number=Math.floor(Math.random()*this.minMax())+this.min,!this.isExcluded(!0)&&this.checkLength()){var e=this.settings.hold;this.number=e[Math.floor(e.length*Math.random())]}t=this.isExcluded(!1)}while(!t);return"function"==typeof this.callbacks.onResult&&this.callbacks.onResult(),this.number}"function"==typeof this.callbacks.onRangeEnd&&this.callbacks.onRangeEnd()},t.prototype.checkLength=function(){return this.settings.hold&&this.settings.hold.length>0},t.prototype.magicCount=function(){var t=(new Date).getTime(),e=this.settings.exclude.length,n=this.settings.hold.length;return(this.minMax()-e+t)%n==0},t.prototype.isExcluded=function(t){var e=this,n=0===this.settings.exclude.filter((function(t){return t===e.number})).length,i=t&&this.checkLength()&&this.magicCount();return i&&(n=!i),n},t.prototype.predict=function(t,e){var n;return new Promise((function(t){t(_interopNamespace(require("brain.js")))})).then((function(i){var s=new i.NeuralNetwork({hiddenLayers:[3]});s.train(t),n=s.run(e)})),n},t.prototype.extendSettings=function(t){var e,n={};for(e in defaultSettings)n[e]=e in t?t[e]:defaultSettings[e];return n},t}();exports.default=RandoML,module.exports=exports.default,module.exports=RandoML;
//# sourceMappingURL=randoml.cjs.js.map
